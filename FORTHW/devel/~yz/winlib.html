<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<link rel="stylesheet" href="forth.css" type="text/css">
<title>Оконная библиотека: окна</title>
</head>

<body background="pic/grid.gif">

<h1 class=lib><u>winlib.f</u>
&nbsp;Оконная библиотека: окна
</h1>

<div style="background: rgb(240,240,220)">
<a href="winlib.html#win">WinLib - Окна и общая функциональность</a>
<br><a href="winctl.html">WinCtl - Элементы управления</a>
<br><a href="wincc.html">WinCC - Новые элементы управления</a>
<br><a href="winlib-corr.html">Список исправлений и дополнений</a>
</div>

<br><a href="winlib.html#1">1. Предисловие</a>
<br><a href="winlib.html#2">2. Общая организация библиотеки</a>
<br><a href="winlib.html#win">3. Окна</a>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="winlib.html#wincreate">Создание и уничтожение окон</a>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="winlib.html#winstd">Стандартные окна</a>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="winlib.html#wincommon">Свойства, общие для всех окон</a>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="winlib.html#winwin">Свойства, специфичные для перекрывающихся окон</a>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="winlib.html#winop">Операции над окнами</a>
<br><a href="winlib.html#msg">4. Сообщения</a>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="winlib.html#msgsend">Посылка сообщений</a>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="winlib.html#msgproc">Обработка сообщений</a>
<br><a href="winlib.html#menu">5. Меню</a>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="winlib.html#menudef">Описание меню</a>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="winlib.html#menuproc">Работа с меню</a>
<br><a href="winlib.html#accel">6. Быстрые клавиши</a>
<br><a href="winlib.html#msgbox">7. Окна сообщений</a>
<br><a href="winlib.html#font">8. Шрифты</a>
<br><a href="winlib.html#misc">9. Разное</a>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="winlib.html#colors">Цвета</a>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="winlib.html#other">Прочее</a>

<br>
<a name="1"></a><h1>1. Предисловие</h1>

<p>Благодаря усилиям многих программистов, СП-Форт стал стабильной и удобной 
системой разработки 32-разрядных приложений. Однако в нем имеется существенный 
пробел: программы с графическим интерфейсом разрабатывать достаточно 
неудобно. Можно, конечно, напрямую вызывать Windows API, но это долгий и 
чреватый ошибками путь. Сам API сделан некрасиво (чего стоит один вызов 
создания окна с 12 (!) аргументами) и имеет сильный уклон в сторону языка 
Си. Настоящая библиотека ставит своей целью если и не до конца скрыть 
вызов системных функций (в полном объеме, не ограничив существенно свободу 
программиста, сделать это нельзя), то хотя бы замаскировать самые одиозные 
места.
<p>Поскольку я не люблю объектно-ориентированное 
программирование, считая его уместным лишь в некоторых специализированных 
задачах, постольку и библиотека далека по своим концепциям от MFC. Во 
время написания я вдохновлялся идеями графической среды 
<a href="http://www.scriptics.com">Tcl/Tk</a> и своей предыдущей работой 
<a href="blank.html">Blank</a>.
<p>Так как библиотека получилась достаточно большой, она разделена на три 
отдельных уровня, чтобы уменьшить размер программ, для которых не нужна 
полная функциональность. В первую часть (<a href="lib/winlib.f">WinLib</a>) входит базовая работа с окнами: создание, 
уничтожение, обработка сообщений, меню, быстрые клавиши. Вторая часть 
(<a href="lib/winctl.f">WinCtl</a>) содержит средства создания элементов 
управления и их автоматическое размещение в окне; третья часть 
(<a href="lib/wincc.f">WinCC</a>) - работу с общими элементами управления 
(то есть, новыми, введенными в Windows 95 и выше).
<p>Библиотека писалась год с перерывами, а работа над ней оказалась 
неожиданно сложной. С большой вероятностью в ней можно найти 
множество мелких ошибок. Я буду признателен всем, кто 
<a href="mailto:yz@forth.org.ru?subj=WinLib">сообщит мне о них</a>.
</p>

<br>
<a name="2"></a><h1>2. Общая организация библиотеки</h1>
<p>Библиотека в большой степени базируется на специальных структурах-таблицах.
Окна и элементы управления представляются такими таблицами - по большому счету, списками 
свойств. Часть свойств могут быть прочитаны и записаны, некоторые - только 
записаны. Свойство <i>-prop</i> читается словом <u>-prop@</u> и записывается словом <u>-prop!</u>.
<p>Таблицы являются пассивными элементами - все операции над ними 
выполняют процедуры-слова. В дальнейшем тексте такие таблицы для упрощения 
будут называться просто окнами и обозначаться в стековой нотации как 
<i>win</i>. Не путайте их с системными дескрипторами окон (hwnd).
<p>В библиотеке используются в основном value-переменные. Поэтому в 
описании под словом "переменные" будут подразумеваться именно 
они, если не будет оговорено иное. Они будут указываться без стековой 
нотации.
<p>Инициализацию библиотеки проводит слово <u>WINDOWS...</u>. После него 
объявляются окна и производится запуск системы выборки сообщений словом 
<u>...WINDOWS</u>. Управление вернется после закрытия главного окна программы. 

<br>
<a name="win"></a><h1>3. Окна</h1>

<a name="wincreate"></a><h2>Создание и уничтожение окон</h2>

<u>create-window</u> <i>( winparent -- win/0 )</i>
<p>
Создает стандартное окно со всеми полагающимися элементами - заголовком, 
рамкой, кнопками. Для создания дочернего окна передается объект 
окно-родитель, для окна верхнего уровня - 0. Если окно по какой-то причине 
не может быть создано, возвращается 0, иначе - объект-окно.
</p>

<u>dialog-window</u> <i>( winparent -- win/0 )</i>
<p>
Создает стандартное диалоговое окно - немасштабируемое, только с кнопкой 
"закрыть".
</p>

<u>tool-window</u> <i>( winparent -- win/0 )</i>
<p>
Создает стандартное окно-палитру - с узким заголовком, без кнопок.
</p>

<u>create-window-with-styles</u> <i>( winparent style exstyle -- win/0 )</i>
<p>
Создает окно любого вида. Передаются стиль окна (константы WS_xxx) и 
расширенный стиль окна (WS_Ex_xxx).
</p>

<u>destroy-window</u> <i>( win -- )</i>
<p>
Уничтожает указанное окно. Перед уничтожением окну посылается сообщение 
<i>wm_destroy</i>.
</p>

<a name=winstd></a><h2>Cтандартные окна</h2>

<u>winmain</u>
<p>
Переменная, в которой хранится главное окно программы. Занести его туда вы 
должны самостоятельно, сразу после создания главного окна. Окно 
<i>winmain</i> обладает следующими свойствами: а) оно служит родителем модальных диалоговых окон и окон 
сообщений; б) к нему подключается меню программы; в) при его закрытии 
заканчивается цикл выборки сообщений окна и управление передается за слово 
<u>...WINDOWS</u> для завершения программы.
</p>

<u>current-window</u>
<p>Последнее созданное окно.
</p>

<a name="wincommon"></a><h2>Свойства, общие для всех окон</h2>

<i>-hwnd</i>
<p>Системный дескриптор окна. Часто требуется для прямого вызова функций 
Windows, не предусмотренных в библиотеке.
</p>

<i>-style</i>
<p>Стиль окна. Свойство можно читать и записывать.
<table class=win><tr><td width=5%><img src="pic/win.gif"><td>
Многие стили окна фиксируются системой при его создании и в дальнейшем их изменить 
нельзя.
</table>
</p>

<i>-color</i>
<p>Цвет текста окна. См. раздел <a href="winlib.html#colors">Цвета</a>.
</p>

<i>-bgcolor</i>
<p>Цвет фона окна. См. раздел <a href="winlib.html#colors">Цвета</a>.
<p>
</p>

<i>-bgbrush</i>
<p>Кисть для закрашивания фона окна. Если ваше окно просто 
закрашивается каким-нибудь цветом, это свойство лучше не трогать. Оно 
полезно, если вы хотите какой-нибудь необыкновенный эффект типа полосатого 
окна или окна с фоном. Делается это примерно так:
<code>
<kbd>\ уничтожаем стандартную кисть</kbd>
<br>w -bgbrush@ DeleteObject DROP
<br><kbd>\ заносим новую</kbd>
<br>blue >bgr W: hs_horizontal CreateHatchBrush w -bgbrush!
</code>
<p>
</p>

<i>-xsize</i>, <i>-ysize</i>
<p>Размеры окна. Для перекрывающихся окон здесь указывается размер лишь
клиентской части окна. Эти свойства можно только читать. Для изменения 
размеров пользуйтесь словами <u>winresize</u> или <u>ctlresize</u>.
</p>

<i>-parent</i>
<p>Родитель окна, если таковой имеется.
</p>

<i>-text</i>
<p>Текст, присвоенный окну. Для перекрывающихся окон - это текст 
заголовка, для элементов управления - обычно текст надписи. Максимальный 
размер этого текста - 255 байтов. Чтение текста производится в буфер 
следующим образом: <u>-text@</u> <i>( a win -- )</i>. Кстати, длину текста 
можно узнать заранее с помощью слова <u>-text#</u> <i>( ctl -- n)</i>
</p>

<i>-dialog</i>
<p>Флаг. Если он установлен, в окне будут работать стандартные клавиши 
перемещения по элементам диалога (Tab, Shift+Tab, стрелки).
</p>

<a name="winwin"></a><h2>Свойства, специфичные для перекрывающихся окон</h2>

<i>-icon, -smicon</i>
<p>Большая и маленькая иконки, присвоенные окну. По умолчанию ставятся 
иконки 1 и 2 из ресурсов исполняемого файла.
</p>

<i>-painter</i>
<p>Процедура отрисовки окна. При вызове в переменной <u>windc</u> хранится 
контекст устройства рисования, в переменной <u>paint-rect</u> - координаты 
прямоугольника, подлежащего отрисовке. Фон окна в этой процедуре рисовать 
не нужно - к моменту вызова он уже закрашен нужным цветом или кистью.
</p>

<i>-wndproc</i>
<p>Список (MESSAGES:...MESSAGES;) обработчиков сообщений окна. Вызывается 
после системной обработки. Можно пользоваться следующими переменными: 
<u>thiswin</u> - окно, к которому пришло сообщение, <u>hwnd</u> - 
дескриптор этого окна, <u>wparam</u>, <u>lparam</u> - параметры сообщения.
</p>

<i>-pre</i>
<p>Список (MESSAGES:...MESSAGES;) обработчиков сообщений окна. Вызывается 
перед системными обработчиками. Рекомендуется использовать только при 
крайней необходимости, отдавая предпочтение <i>-wndproc</i>, поскольку 
можно легко нарушить стандартную обработку.
</p>

<i>-hscroll, -vscroll</i>
<p>Список обработчиков сообщений от полос прокрутки окна. Полосы прокрутки 
окна могут быть включены функцией ShowScrollBar.
</p>

<i>-userdata</i>
<p>Пользовательские данные, связанные с окном. Библиотека это поле никак 
не использует.
</p>

<a name="winop"></a><h2>Операции над окнами</h2>

<u>winshow</u> <i>( win -- )</i>
<p>Показать окно.
</p>

<u>winhide</u> <i>( win -- )</i>
<p>Спрятать окно.
</p>

<u>winminimize</u> <i>( win -- )</i>
<p>Свернуть окно.
</p>

<u>winmaximize</u> <i>( win -- )</i>
<p>Развернуть окно до максимального размера.
</p>

<u>winrestore</u> <i>( win -- )</i>
<p>Восстановить размер окна.
</p>

<u>windisable</u> <i>( win -- )</i>
<p>Запретить работу окна. Запрещенное окно не принимает ввод от 
пользователя.
</p>

<u>winenable</u> <i>( win -- )</i>
<p>Разрешить работу окна.
</p>

<u>winfocus</u> <i>( win -- )</i>
<p>Установить на окно фокус ввода.
</p>

<u>winmove</u> <i>( x y win -- )</i>
<p>Переместить окно в указанную точку. Координаты измеряются в пикселях от 
левого верхнего угла экрана - для окон верхнего уровня - или клиентской 
области родительского окна.
</p>

<u>winresize</u> <i>( w h win -- )</i>
<p>Изменить размер окна. Слово работает только для перекрывающихся окон, 
<i>w</i> и <i>h</i> - размер новой клиентской области окна. Для элементов 
управления используйте <u>ctlresize</u>.
</p>

<table class=win><tr><td width=5%><img src="pic/win.gif"><td>
Для обыкновенных (не диалоговых) окон Windows почему-то не выдерживает размер 
окна по горизонтали. Можно гарантировать только, что новый размер окна 
будет не меньше запрошенного. При запросе ширины окна в 100 точек система 
может установить 104, 106 и даже 112 - в зависимости от фаз Луны. Размер 
окон с фиксированной границей выдерживается правильно.
</table>
</p>

<u>wincenter</u> <i>( win -- )</i>
<p>Расположить окно в центре экрана (для окон верхнего уровня) или в 
центре родительского окна (для остальных)
</p>

<br>
<a name="msg"></a><h1>4. Сообщения</h1>

<a name="msgsend"></a><h2>Посылка сообщений</h2>

<u>send</u> <i>( wparam lparam msg win -- result )</i>
<p>Послать окну сообщение <i>msg</i> с указанными параметрами и вернуть 
результат.</p>

<u>?send</u> <i>( win msg -- result )</i>
<p>Послать окну сообщение <i>msg</i> с параметрами 0, 0</p>

<u>wsend</u> <i>( wparam win msg -- result )</i>
<p>Послать окну сообщение <i>msg</i> с параметрами <i>wparam</i> и lparam=0</p>

<u>lsend</u> <i>( lparam win msg -- result )</i>
<p>Послать окну сообщение <i>msg</i> с параметрами wparam=0 и <i>lparam</i>
</p>

<u>send-to-window</u> <i>( wparam lparam msg hwnd -- result )</i>
<p>Послать окну с дескриптором <i>hwnd</i> сообщение <i>msg</i> с указанными параметрами и вернуть 
результат.</p>

<a name="msgproc"></a><h2>Обработка сообщений</h2>

Обработчики сообщений группируются в списки обработчиков. Каждый 
обработчик должен при завершении своей работы вернуть флаг, показывающий, 
обработал он данное сообщение или нет. Любое перекрывающееся окно может 
обрабатывать сообщения до обработки библиотекой (свойство окна 
<i>-pre</i>), после обработки (свойство <i>-wndproc</i>), а также 
сообщения от полос прокрутки. Все эти сообщения описываются
единообразно.
</p>

<u>MESSAGES:</u> <i>"name"</i>
<p>Начать список сообщений с именем <i>name</i>.
</p>

<u>MESSAGES;</u> <i>( -- )</i>
<p>Закончить список сообщений.
</p>

<u>M:</u> <i>( ->bl)</i>
<p>Начать обработчик сообщения <i>message</i> (константы WM_xxx).
</p>

<u>M;</u> <i>( result -- )</i>
<p>Завершить обработчик сообщения. Если обработчик оставил на стеке FALSE, 
сообщение считается необработанным и продолжается поиск следующих 
обработчиков. Если TRUE - сообщение обработано и   
Windows возвращается в качестве результата 0 или значение, предварительно установленное 
словом <u>RETURN</u>.
</p>

<u>RETURN</u> <i>( code -- )</i>
<p>Устанавливает код возврата из обработчика сообщения.
</p>

<br>
<a name="menu"></a><h1>4. Меню</h1>

<a name="menudef"></a><h2>Описание меню</h2>

<u>MENU:</u> <i>( ->bl; -- )</i>    
<p>Начать описание меню.
</p>

<u>MENU;</u> <i>( -- )</i>    
<p>Закончить описание меню.
</p>

<u>MENUITEM</u> <i>( ->eol; xt -- )</i>    
<p>Вставить в меню новый пункт. При выборе этого пункта будет выполнено 
слово <i>xt</i>.
</p>

<u>SUBMENU</u> <i>( ->bl; menu -- )</i>    
<p>Вставить указанное меню как подменю.
</p>

<u>LINE</u> <i>( -- )</i>    
<p>Вставить в меню разделительную линию.
</p>

<u>CHECKED</u> <i>( -- )</i>    
<p>Текущий пункт меню будет отмечен.
</p>

<u>DISABLED</u> <i>( -- )</i>    
<p>Текущий пункт меню будет отключен.
</p>

<code>
MENU: mainmenu
<br>['] file MENUITEM &Файл
<br>LINE
<br><kbd>\ в следующем пункте указывается заодно и горячая клавиша. Впрочем, 
<br>\ она будет только прописана в соответствующем месте меню. Чтобы по 
<br>\ Ctrl+O действительно что-то вызывалось, не забудьте добавить в таблицу 
<br>\ горячих клавиш ['] proc ONKEY ctrl+vk_O</kbd>
<br>['] open MENUITEM &Открыть файл...\tCtrl+O
<br>MENU;
</code>

<a name="menuproc"></a><h2>Работа с меню</h2>

<u>attach-menubar</u> <i>( menu win -- )</i>    
<p>Присоединить меню к указанному окну.
</p>

<u>detach-menubar</u> <i>( win -- )</i>    
<p>Отсоединить от окна меню.
</p>

<u>show-menu</u> <i>( menu x y -- )</i>    
<p>Показать раскрывающееся меню <i>menu</i> в точке с указанным экранными 
координатами. Слово возвращает управление после того, как пользователь 
выберет какой-нибудь пункт меню или закроет его. <u>show-menu</u> работает 
только при установленном главном окне (<i>winmain</i>).
</p>

<u>default-menu-item</u> <i>( no menu -- )</i>    
<p>Сделать пункт меню с указанным номером пунктом, выбираемым по 
умолчанию. В этом и следующих словах номера пунктов меню отсчитываются от нуля.
</p>

<u>enable-menu-item</u> <i>( no menu -- )</i>    
<p>Включить указанный пункт меню.
</p>

<u>disable-menu-item</u> <i>( no menu -- )</i>    
<p>Отключить указанный пункт меню.
</p>

<u>check-menu-item</u> <i>( no menu -- )</i>    
<p>Отметить указанный пункт меню.
</p>

<u>uncheck-menu-item</u> <i>( no menu -- )</i>    
<p>Убрать отметку с указанного пункта меню.
</p>

<u>(un)check-me</u> <i>( -- ?)</i>    
<p>Слово предназначено для использования в обработчиках пунктов меню. Оно 
ставит или сбрасывает отметку текущего пункта и возвращает флаг, 
показывающий новое состояние пункта.
</p>

<u>check-menu-radio</u> <i>( firstno lastno no menu -- )</i>    
<p>Устанавливает отметку на пункт меню номер <i>no</i>. Отметки со всех 
остальных пунктов от первого <i>firstno</i> до последнего <i>lastno</i> 
сбрасываются.
</p>

<br>
<a name="accel"></a><h1>6. Быстрые клавиши</h1>

<u>KEYTABLE</u> <i>( -- )</i>    
<p>Начать описание таблицы быстрых клавиш.
</p>

<u>KEYTABLE;</u> <i>( -- )</i>    
<p>Закончить описание таблицы быстрых клавиш.
</p>

<u>ONKEY</u> <i>( ->bl; xt -- )</i>    
<p>Определить быструю клавишу. При ее нажатии будет вызвано слово 
<i>xt</i>. Клавиши описываются в виде констант VK_xxx, перед которыми в 
произвольном порядке могут стоять модификаторы "ctrl+", "alt+", "shift+".	
</p>

<code>
['] f5 ONKEY vk_f5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['] sp ONKEY ctrl+alt+vk_space
</code>

<br>
<a name="msgbox"></a><h1>7. Окна сообщений</h1>

<u>message-box</u> <i>( title text flags -- result )</i>    
<p>Показать окно сообщения. <i>Title</i> - заголовок окна, <i>text</i> - 
текст окна (может состоять из нескольких строк, разделяется символом \n", <i>flags</i> - набор констант MB_xxx.
</p>

<u>msg</u> <i>( text -- )</i>    
<p>Окно-предупреждение. Заголовок берется из <u>mbox-title</u>.
</p>

<u>err</u> <i>( text -- )</i>    
<p>Окно-ошибка. Заголовок берется из <u>mbox-title</u>.
</p>

<u>mbox-title</u>
<p>Переменная, в которой хранится адрес строки - заголовка окон сообщений.
Если не установлена, в окнах ставится заголовок "Ошибка".
</p>

<br>
<a name="font"></a><h1>8. Шрифты</h1>

<u>create-font</u> <i>( name size -- font )</i>    
<p>Создает шрифт с указанным именем. Размер указывается в типографских 
пунктах. Необязательные параметры шрифта задаются модификаторами.
</p>

<u>delete-font</u> <i>( font -- )</i>    
<p>Уничтожить шрифт. Теоретически, ОС должна уничтожать все графические 
объекты, включая шрифты, после закрытия программы. Однако имеются 
подозрения, что Windows 95/98/Me этого не делают, поэтому не забывайте 
стирать шрифты вручную.
</p>

<u>bold</u> <i>( -- )</i>    
<p>Модификатор: определяемый шрифт будет жирным.
</p>

<u>italic</u> <i>( -- )</i>    
<p>Модификатор: определяемый шрифт будет курсивным.
</p>

<u>underline</u> <i>( -- )</i>    
<p>Модификатор: определяемый шрифт будет подчеркнутым.
</p>

<u>strike-out</u> <i>( -- )</i>    
<p>Модификатор: определяемый шрифт будет перечеркнутым.
</p>

<code>
" Times New Roman Cyr" 12 bold italic create-font TO ff
</code>

<u>default-font</u> <i>( font -- )</i>
<p>Устанавливает стандартный шрифт, который с этого момента будет 
использоваться для всех элементов управления, кроме всплывающих подсказок.
Не забудьте уничтожить этот шрифт в конце работы программы (он хранится в 
переменной <i>def-font</i>). Если вызвать это слово с аргументом 0, для 
элементов будет использоваться стандартный системный шрифт.
</p>

<u>-sysfont</u> <i>( -- )</i>
<p>Устанавливает последнему определенному элементу системный шрифт.
</p>

<br>
<a name="misc"></a><h1>9. Разное</h1>

<a name="colors"></a><h2>Цвета</h2>

Цвета задаются одной 32-разрядной ячейкой со следующими значениями битов: 
0x00rrggbb, где rr, gg, bb - соответственно красная, синяя и зеленая 
компонента цвета. Определены нижеперечисленные стандартные цвета плюс 
константа <u>transparent</u>, обозначающая прозрачный цвет: 
</p>

<table>
<tr>
<td width=3% bgcolor=red>&nbsp;&nbsp;&nbsp;&nbsp;<td width=12%>red
<td width=3% bgcolor=green>&nbsp;&nbsp;&nbsp;&nbsp;<td width=12%>green
<td width=3% bgcolor=blue>&nbsp;&nbsp;&nbsp;&nbsp;<td width=12%>blue
<td style="border: black solid 1pt;" width=3% bgcolor=white>&nbsp;&nbsp;&nbsp;&nbsp;<td width=12%>white
<td width=3% bgcolor=black>&nbsp;&nbsp;&nbsp;&nbsp;<td width=12%>black
<td width=3% bgcolor=yellow>&nbsp;&nbsp;&nbsp;&nbsp;<td width=12%>yellow
<td width=3% bgcolor=violet>&nbsp;&nbsp;&nbsp;&nbsp;<td width=12%>violet
<td width=3% bgcolor=cyan>&nbsp;&nbsp;&nbsp;&nbsp;<td width=12%>cyan
</table>

</p>

<u>syscolor</u> <i>( index -- rgb )</i>    
<p>Возвращает в формате RGB один из системных цветов, определяемых 
константами <i>color_xxx</i>.
</p>

<u>>bgr</u> <i>( rgb -- bgr )</i>    
<p>Переводит цвет из внутреннего формата Windows (0x00bbggrr) в формат RGB 
(0x00rrggbb) или наоборот.
</p>

<u>rgb</u> <i>( r g b -- rgb )</i>    
<p>Собирает цвет из трех отдельных компонентов.
</p>

<a name="other"></a><h2>Прочее</h2>

<u>scrеen-x, screen-y</u> <i>( -- n )</i>    
<p>Возвращает размер экрана по горизонтали или по вертикали 
соответственно.
</p>

<u>hdu</u> <i>( hdu -- pixels)</i>    
<p>Пересчитывает горизонтальные диалоговые единицы (это своеобразные 
измерительные величины, которыми используются в Windows при описании 
диалогов как ресурсов) в пикселы.
</p>

<u>vdu</u> <i>( hdu -- pixels)</i>    
<p>Пересчитывает вертикальные диалоговые единицы в пикселы.
</p>

<u>dunits</u> <i>( hdu vdu -- w h)</i>    
<p>Пересчитывает размеры в диалоговых единицах в пикселы.
</p>

<code>
<a href="prog/winlib/winlib-example.f"><img src="pic/spf.gif"></a>
Пример работы с окнами
</code>

</html>
