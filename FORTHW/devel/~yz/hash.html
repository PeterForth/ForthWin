<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<link rel="stylesheet" href="forth.css" type="text/css">
<title>Hash</title>
</head>

<body background="pic/grid.gif">

<h1 class=lib><u>hash.f</u>
&nbsp;Расстановочные таблицы
</h1>

Расстановочные таблицы, иначе именуемые хеш-таблицами. Таблицы заносятся в 
<a href="gmem.html">глобальную память</a>, поэтому доступны для
модификации и уничтожения из любого потока.
</p>

<u>small-hash</u> <i>( -- hash )</i>
<p>Создать новую хеш-таблицу.
</p>

<u>big-hash</u> <i>( -- hash )</i>
<p>Создать новую хеш-таблицу. Таблица будет занимать больше места, но
поиск в ней для большого количества данных будет идти быстрее.
</p>

<u>large-hash</u> <i>( -- hash )</i>
<p>Создать новую хеш-таблицу еще большего размера, чем делает <u>big-hash</u>
</p>

<u>del-hash</u> <i>( hash -- )</i>
<p>Удалить хеш-таблицу и все содержащиеся в ней данные.</p>

<u>clear-hash</u> <i>( hash -- )</i>
<p>Очищает хеш-таблицу, удаляя все содержащиеся в ней данные.</p>

<u>all-hash</u> <i>( xt hash -- )</i>
<p>Обойти хеш-таблицу. Для каждого элемента будет вызвано слово <i>xt</i>
( akey nkey value -- ). Смысл <i>value</i> зависит от того, какое слово записывало данные:
<u>HASH!</u> - адрес строки со счетчиком, <u>HASH!Z</u> - адрес начала
строки, <u>HASH!N</u> - число, <u>HASH!R</u> - адрес начала данных.
</p>

<u>del-some-records</u> <i>( xt hash -- )</i>
<p>Обойти хеш-таблицу. Для каждого элемента будет вызвано слово <i>xt</i>
( akey nkey value -- ?), которое должно оставить на стеке флаг, 
показывающий, нужно ли удалять эту запись. 
</p>

<u>HASH!</u> <i>( avalue nvalue akey nkey hash -- )</i>
<p>Занести в таблицу форт-строку <i>avalue nvalue</i>, индексируемую ключом
<i>akey nkey</i>. Если такой ключ в таблице уже есть, его значение будет
заменено.
</p>

<u>HASH!Z</u> <i>( zvalue akey nkey hash -- )</i>
<p>То же, что и <u>HASH@</u>, но запоминаемое значение - asciiz-строка.
</p>

<u>HASH!N</u> <i>( akey nkey n hash -- )</i>
<p>То же, что и <u>HASH!</u>, но запоминаемое значение - число.
</p>

<u>HASH!R</u> <i>( size akey nkey hash -- а)</i>
<p>Занести в таблицу произвольную запись размером <i>size</i> байтов, индексируемую ключом
<i>akey nkey</i>. Слово возвращает адрес начала новой записи, куда программа
должна затем записать свои данные. Если ключ в таблице уже имеется, его
значение будет заменено на новое.
</p>

<u>-HASH</u> <i>( akey nkey hash -- )</i>
<p>Удалить из таблицы запись с указанным ключом. Если ключа нет, никаких
действий не выполняется.
</p>

<u>HASH?</u> <i>( akey ukey hash -- ? )</i>
<p>Проверить, имеется ли в хеш-таблице указанная запись.
</p>

<u>HASH@</u> <i>( akey nkey hash -- avalue nvalue / 0 0)</i>
<p>Получить значение по ключу. Если ключа нет, возвращается два нуля.
</p>

<u>HASH@Z</u> <i>( akey nkey hash -- z / 0)</i>
<p>Получить значение - asciiz-строку по ключу.
</p>

<u>HASH@R</u> <i>( akey nkey hash -- a / 0)</i>
<p>Получить адрес записи по ключу.
</p>

<u>HASH@N</u> <i>( akey nkey hash -- n TRUE / FALSE)</i>
<p>Получить значение-число по ключу.
</p>

</html>