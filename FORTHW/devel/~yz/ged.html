<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<link rel="stylesheet" href="forth.css" type="text/css">
<title>GED - пакетный графический редактор</title>
</head>

<body background="pic/grid.gif">

<h1 class=lib><u>GED</u>
&nbsp;Пакетный графический редактор
</h1>

Генерирует рисунки по описанию. Умеет:
<ul>
<li>открывать и сохранять TIFF файлы, черно-белые и цветоделенные CMYK;
<li>рисовать точки, линии, прямоугольники, эллипсы, кривые Безье;
<li>накладывать на рисунок другие рисунки, в том числе с учетом
прозрачности;
<li>размещать надписи.
</ul>
GED сделан в традиционном фортовском духе - это стандартная
Форт-система на базе СП-Форта 4.0, расширенная графическими операторами.
Для работы ей требуются дополнительные динамические библиотеки из проекта
<a
href="http://gnuwin32.sourceforge.net/packages/libtiff.htm">GNUWIN32</a>:
libtiff.dll, libjpeg.dll, zlib.dll.
<br><br>
Ниже описаны дополнительные слова работы с графикой. Все размеры
измеряются в точках, кроме размера шрифта.
Координаты отсчитываются с нуля от левого верхнего угла рисунка.
Слова, которым требуются строки (имена файлов,
содержимое надписей), ожидают строки, заканчивающиеся нулем (ASCIIZ).
</p>

<h2>Загрузка и сохранение</h2>

<u>Создать</u> <i>( ширина высота -- )</i>
<p>Создает новый фон размеров <i>ширина</i> на <i>высота</i> точек и закрашивает его белым цветом.
Из-за сомнительной реализации графических функций в Windows 95/98 <i>ширина</i>
должна быть кратна четырем, иначе все надписи будут искажены.
</p>

<u>Загрузить</u> <i>( файл -- )</i>
<p>Загружает в редактор указанный <i>файл</i> и делает его фоном. Файл
может быть в формате Grayscale - один черный канал; в формате CMYK -
четыре канала; в формате RGB - три канала. В последнем случае изображение
преобразуется в формат CMYK. Алгоритм преобразования не отличается
сложностью, поэтому результаты, как правило, сомнительные: цвета сильно
искажаются. Ширина картинки в файле должна быть кратна четырем, иначе
надписи будут выведены неправильно.
</p>

<u>Сохранить</u> <i>( файл -- )</i>
<p>Записать получившуюся картинку в формате CMYK с разрешением 300 точек
на дюйм.
</p>

<u>Сохранить-ч/б</u> <i>( файл -- )</i>
<p>Записать получившуюся картинку в формате Grayscale с разрешением 300 точек
на дюйм.
</p>

<h2>Надписи</h2>
<u>Шрифт</u> <i>( имя размер -- )</i>
<p>Делает шрифт <i>имя</i> размером <i>размер</i> пунктов текущим. Другие
характеристики шрифта могут быть заданы нижеуказанными словами.
</p>

<u>жирный</u> <i>( -- )</i>
<p>Будет выбран жирный шрифт</p>

<u>курсив</u> <i>( -- )</i>
<p>Будет выбран курсивный шрифт</p>

<u>подчеркнутый</u> <i>( -- )</i>
<p>Будет выбран подчеркнутый шрифт</p>

<u>перечеркнутый</u> <i>( -- )</i>
<p>Будет выбран перечеркнутый шрифт</p>

<div class="e">
<font color="#808080">Пример</font>
<br>
<tt>" Times New Roman" 12 жирный курсив Шрифт</tt>
</div>

<u>Слева</u> <i>( надпись х у -- )</i>
<p>Разместить <i>надпись</i>, выровненную влево. В точку с координатами <i>х у</i>
будет помещен левый нижний угол надписи.
</p>

<u>Справа</u> <i>( надпись х у -- )</i>
<p>Разместить <i>надпись</i>, выровненную вправо. В точку с координатами <i>х у</i>
будет помещен правый нижний угол надписи.
</p>

<u>По-центру</u> <i>( надпись х у -- )</i>
<p>Разместить <i>надпись</i>, выровненную по центру. В точку с координатами <i>х у</i>
будет помещен центр базовой линии надписи.
</p>

<u>Размер-надписи</u> <i>( надпись -- ширина высота)</i>
<p>Возвращает размер <i>надписи</i>, выведенной текущим шрифтом</p>

<h2>Графические объекты</h2>

<u>Объект</u> имя <i>( ->bl; файл -- )</i>
<p>Создает графический объект <i>имя</i>, читая его содержимое из
TIFF-<i>файла</i>. Файл может быть в формате Grayscale, RGB (не
рекомендуется: цвета будут преобразованы в CMYK очень примерно), CMYK.
Объекты могут включать дополнительный канал прозрачности - таковым
считается первый дополнительный файла. Точки с значением 0 считаются
непрозрачными, точки с значением 255 - полностью прозрачными, остальные -
полупрозрачными соответственно значению. Проще всего канал прозрачности
сделать в программе Photoshop, перенеся текущее выделение в альфа-канал.
</p>

<u>Размеры</u> <i>( объект -- ширина высота)</i>
<p>Вернуть размеры указанного <i>объекта</i>
</p>

<u>Наложить</u> <i>( объект х у -- )</i>
<p>Наложить на текущий фон объект с учетом его прозрачности. <i>Х</i> и <i>У</i> -
координаты левого верхнего угла объекта</p> 

<u>Наложить-часть</u> <i>( объект ох оу ош ов х у -- )</i>
<p>Наложить на текущий фон часть объекта с учетом прозрачности. Из объекта 
будет взята часть, отстоящая на <i>ох оу</i> от левого верхнего угла
объекта, шириной <i>ош</i> и высотой <i>ов</i>, и наложена левым верхним углом в точку фона <i>х у</i>

<h2>Обводка и заливка</h2>
<u>Обводка</u> <i>( r g b -- )</i>
<p>Установить цвет обводки. Возможные модификаторы обводки приведены ниже.
Команда влияет на <u>Точку</u>, <u>Линию</u>, <u>Кривую</u> (задает цвет и стиль фигуры);
<u>Прямоугольник</u> и <u>Эллипс</u> (цвет и стиль внешней границы).
Список стандартных цветов приводится в разделе <a
href="ged.html#colors">Цвета</a>. Возможно указать приведенные ниже модификаторы.
</p>

<u>[]</u> <i>( -- )</i>
<p>Обводки не будет</p>

<u>[-]</u> <i>( -- )</i>
<p>Сплошная обводка</p>

<u>[--]</u> <i>( -- )</i>
<p>Пунктирная обводка</p>

<u>[.]</u> <i>( -- )</i>
<p>Обводка из точек</p>

<u>[.-]</u> <i>( -- )</i>
<p>Обводка типа "точка-тире"</p>

<u>[..-]</u> <i>( -- )</i>
<p>Обводка типа "точка-точка-тире"</p>

<div class="e">
<font color="#808080">Пример</font>
<br>
<tt>[.] красная Обводка</tt>
</div>

<u>Заливка</u> <i>( r g b -- )</i>
Установить цвет заливки. Команда влияет на <u>Прямоугольник</u>,
<u>Эллипс</u> (цвет внутренней области), а также на надписи (цвет букв).
Возможные модификаторы указаны ниже.
</p>

<u>[o]</u> <i>( -- )</i>
<p>Сплошная заливка</p>

<u>[_]</u> <i>( -- )</i>
<p>Нет заливки</p>

<a name=colors></a>
<h2>Цвета</h2>

Цвета задаются в формате ( r g b -- ), соответственно красная, зеленая и
синяя компонента. Можно использовать следующие стандартные слова:
<u>белая</u>, <u>черная</u>, <u>желтая</u> (cmyk: 0,0,100,0),
<u>пурпурная</u> (cmyk: 0,100,0,0), <u>голубая</u> (cmyk: 100,0,0,0),
<u>красная</u>, <u>зеленая</u>, <u>синяя</u>, <u>серая10</u>,
<u>серая15</u>.
<br><br>

<u>серая</u> <i>( n -- )</i>
<p>Серый цвет указанного процента (0 - чисто белый, 100 - чисто черный)</p>

<h2>Рисование</h2>

<u>Точка</u> <i>( х у -- )</i>
<p>Вывести в указанной точке пиксель цветом текущей обводки</p>

<u>Линия</u> <i>( х1 у1 х2 у2 -- )</i>
<p>Провести линию цветом текущей обводки</p>

<u>Кривая</u> <i>( х1 у2 х2 у2 х3 у3 х4 у4 -- )</i>
<p>Нарисовать кривую Безье цветом текущей обводки. Первая точка - начало
кривой, четвертая точка - конец кривой, вторая и третья - контрольные.</p>

<u>Прямоугольник</u> <i>( х1 у1 х2 у2 -- )</i>
<p>Нарисовать прямоугольник по указанным координатам левой верхней и
правой нижней вершин. Прямоугольник обводится текущей обводкой и
закрашивается изнутри текущей заливкой.</p>

<u>Эллипс</u> <i>( х1 у1 х2 у2 -- )</i>
<p>Нарисовать эллипс, вписанный в прямоугольник с указанными координатами. Эллипс обводится текущей обводкой и
закрашивается изнутри текущей заливкой.</p>

<h2>Разное</h2>
<u>Из-файла</u> <i>( файл -- )</i>
<p>Прервать обработку текущего файла, обработать команды, находящиеся в
указанном <i>файле</i> и продолжить работу с текущим файлом</p>

<u>ширина</u> <i>( -- ширина)</i>
<p>Ширина текущего фона</p>

<u>высота</u> <i>( -- высота)</i>
<p>Высота текущего фона</p>

<u>мм</u> <i>( n -- n1 )</i>
<p>Пересчитать миллиметры в точки при разрешении 300 точек на дюйм.</p>

<u>пт</u> <i>( n -- n1 )</i>
<p>Пересчитать типографские пункты в точки при разрешении 300 точек на дюйм.</p>

<div class="e">
Пример использования программы GED - создание шахматных диаграмм по нотации - смотрите <a href="http://www.forth.org.ru/~yz/prog/ged/chess.rar">здесь</a>.
</div>


</html>